<template>
  <div>
    <div
      class="tw-relative tw-m-auto tw-flex tw-min-h-screen tw-max-w-6xl tw-flex-col"
    >
      <!-- Green background -->
      <div
        class="tw-absolute tw-left-1/2 tw-bottom-0 tw-h-[40%] tw-w-screen -tw-translate-x-1/2 tw-bg-green sm:tw-h-[47%]"
      ></div>

      <!-- Header -->
      <div class="tw-mb-16">
        <div class="tw-flex tw-items-center tw-px-5 tw-pt-5">
          <v-img
            alt="schej Logo"
            class="shrink tw-cursor-pointer"
            contain
            src="@/assets/schej_logo_with_text.png"
            transition="scale-transition"
            :width="logoWidth"
          />

          <v-spacer />

          <v-btn text href="#how-it-works">How it works</v-btn>
          <v-btn text @click="signIn">Sign in</v-btn>
        </div>
      </div>

      <div
        class="tw-relative tw-flex tw-justify-center tw-pb-12 lg:tw-justify-between lg:tw-pb-24"
      >
        <!-- Left side -->
        <div class="tw-flex tw-flex-col">
          <!-- Hero -->
          <div
            class="tw-mx-4 tw-flex tw-max-w-[26rem] tw-flex-col tw-items-start sm:tw-max-w-none lg:tw-mb-20"
          >
            <div
              id="header"
              class="tw-mb-4 tw-text-left tw-text-2xl tw-font-medium sm:tw-text-4xl lg:tw-text-4xl xl:tw-text-5xl"
            >
              <div class="tw-leading-snug">Finding a time to meet,</div>
              <div class="tw-leading-snug">made simple.</div>
            </div>

            <div
              class="lg:tw-text-md tw-mb-4 tw-text-left tw-text-sm tw-text-very-dark-gray sm:tw-text-lg md:tw-text-lg xl:tw-text-lg"
            >
              <b>Automatically</b> fill out your availability with Google
              Calendar—<br v-if="!isPhone" />
              it’s like When2Meet with Google Calendar integration!
            </div>
          </div>

          <v-btn
            id="lets-schej-it-btn"
            class="tw-my-6 tw-block tw-self-center tw-rounded-lg tw-bg-green tw-px-10 tw-text-base sm:tw-px-10 lg:tw-hidden lg:tw-px-12"
            dark
            @click="newEventDialog = true"
            large
            :x-large="$vuetify.breakpoint.mdAndUp"
          >
            Create event
          </v-btn>

          <!-- Calendar -->
          <LandingPageCalendar class="tw-drop-shadow-lg" />
        </div>

        <!-- Right side -->
        <div class="tw-ml-12 tw-mr-4 tw-hidden lg:tw-block">
          <NewEvent
            class="tw-drop-shadow-lg"
            :dialog="false"
            :allow-notifications="false"
          />
        </div>
      </div>
    </div>

    <!-- How it works -->
    <div
      id="how-it-works"
      class="tw-grid tw-place-content-center tw-px-4 tw-pt-12"
    >
      <div class="tw-mx-auto tw-flex tw-flex-col tw-gap-4">
        <div
          class="tw-mb-4 tw-text-center tw-text-2xl tw-font-medium sm:tw-text-3xl lg:tw-text-4xl"
        >
          How it works
        </div>
        <div
          v-for="(step, i) in howItWorksSteps"
          :key="i"
          class="tw-flex tw-items-center tw-gap-2"
        >
          <NumberBullet>{{ i + 1 }}</NumberBullet>
          <div class="tw-text-base tw-font-medium md:tw-text-xl">
            <div v-if="i == 1">
              <span
                class="tw-cursor-pointer tw-underline tw-decoration-pale-green tw-decoration-4 hover:tw-decoration-green"
                style="text-underline-position: under"
                @click="confetti"
              >
                Automatically
              </span>
              fill out your availability with Google Calendar,
            </div>
            <div v-else v-html="step"></div>
          </div>
        </div>
      </div>
      <div
        class="tw-mt-10 tw-mb-6 tw-text-center tw-text-3xl tw-font-medium md:tw-mt-20 md:tw-mb-12 md:tw-text-6xl"
      >
        It's that simple.
      </div>
      <v-img
        alt="schej character"
        src="@/assets/schej_character.png"
        :height="isPhone ? 200 : 300"
        transition="fade-transition"
        contain
        class="-tw-mb-12"
      />
    </div>

    <!-- Video -->
    <div
      class="tw-flex tw-justify-center tw-bg-green tw-px-4 tw-pt-24 tw-pb-12 md:tw-pb-16"
    >
      <div class="tw-h-64 tw-max-w-3xl tw-flex-1 sm:tw-h-80 md:tw-h-96">
        <iframe
          class="tw-h-full tw-w-full"
          src="https://www.youtube.com/embed/Wzth9Ov7bkI?fs=0&color=white&rel=0&controls=0"
          title="schej demo"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowfullscreen
        ></iframe>
      </div>
    </div>

    <!-- FAQ -->
    <div class="tw-flex tw-justify-center tw-pt-12">
      <div class="tw-mx-4 tw-mb-12 tw-max-w-3xl tw-flex-1 sm:tw-mx-16">
        <div id="faq-section" class="tw-text-center lg:tw-pt-3">
          <Header> Frequently Asked Questions </Header>
          <div
            class="tw-grid tw-grid-cols-1 tw-gap-3 sm:tw-text-xl lg:tw-text-2xl"
          >
            <FAQ v-for="faq in faqs" :key="faq.question" v-bind="faq" />
          </div>
        </div>
      </div>
    </div>

    <!-- Privacy Policy -->
    <div class="tw-flex tw-flex-col tw-bg-green">
      <div
        class="tw-m-2 tw-flex tw-flex-col tw-items-center tw-gap-4 tw-pt-6 tw-pb-6"
      >
        <router-link
          class="tw-font-bold tw-text-white"
          :to="{ name: 'privacy-policy' }"
        >
          Privacy Policy
        </router-link>
        <div class="tw-text-light-gray">Made with ❤️ by the schej team</div>
      </div>
    </div>

    <!-- Sign in dialog -->
    <v-dialog v-model="signInDialog" :width="400">
      <v-card>
        <v-card-title>Sign in</v-card-title>
        <v-card-text class="tw-flex tw-flex-col tw-items-center">
          <SignInGoogleBtn class="tw-mb-4" @click="signInGoogle" dark />
          <div class="tw-text-center tw-text-xs">
            By continuing, you agree to our
            <router-link class="tw-text-blue" :to="{ name: 'privacy-policy' }"
              >privacy policy</router-link
            >
          </div>
        </v-card-text>
      </v-card>
    </v-dialog>

    <!-- New event dialog -->
    <NewEventDialog v-model="newEventDialog" :allow-notifications="false" />
  </div>
</template>

<style scoped>
@media screen and (min-width: 375px) and (max-width: 640px) {
  #header {
    font-size: 1.875rem !important; /* 30px */
    line-height: 2.25rem !important; /* 36px */
  }
}
</style>

<script>
import LandingPageCalendar from "@/components/LandingPageCalendar.vue"
import { isPhone, signInGoogle } from "@/utils"
import SignInGoogleBtn from "@/components/SignInGoogleBtn.vue"
import FAQ from "@/components/FAQ.vue"
import Header from "@/components/Header.vue"
import NumberBullet from "@/components/NumberBullet.vue"
import NewEvent from "@/components/NewEvent.vue"
import NewEventDialog from "@/components/NewEventDialog.vue"
import { confetti } from "tsparticles-confetti"

export default {
  name: "Landing",

  components: {
    LandingPageCalendar,
    SignInGoogleBtn,
    FAQ,
    Header,
    NumberBullet,
    NewEvent,
    NewEventDialog,
  },

  data: () => ({
    signInDialog: false,
    newEventDialog: false,
    howItWorksSteps: [
      "Create a schej event",
      "Automatically fill out your availability with Google Calendar",
      "Share the schej and find the best time to meet!",
    ],
    faqs: [
      {
        question: "How is schej different from lettucemeet or when2meet?",
        points: [
          "Much better UI (web and mobile)",
          "Seemless and working calendar integration",
          "No ads :)",
        ],
      },
      {
        question: "Is Google Calendar access required in order to use schej?",
        answer:
          "Nope! You can manually input your availability, but we highly recommend allowing Google Calendar access in order to view your calendar events while doing so.",
      },
      {
        question: "Will other people be able to see my calendar events?",
        answer:
          "Nope! All other users will be able to see is the availability that you enter for an event.",
      },
      {
        question: "How do I edit my availability?",
        answer:
          'If you are signed in, simply click the "Edit availability" button. If you entered your availability as a guest, click on your name first and then "Edit availability".',
      },
    ],
  }),

  computed: {
    isPhone() {
      return isPhone(this.$vuetify)
    },
    logoWidth() {
      return 90
    },
  },

  methods: {
    confetti() {
      confetti({
        spread: 360,
        ticks: 1000,
        // count: 100,
        shapes: ["image"],
        scalar: 5,
        shapeOptions: {
          image: [
            {
              src: require("@/assets/schej_logo.png"),
              width: 32,
              height: 32,
            },
          ],
        },
      })
    },
    signInGoogle() {
      signInGoogle({ state: null, selectAccount: true })
    },
    signIn() {
      this.signInDialog = true
    },
  },
}
</script>
